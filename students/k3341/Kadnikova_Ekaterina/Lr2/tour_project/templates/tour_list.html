{% extends 'base.html' %}
{% block header_title %}Available Tours{% endblock %}
{% block content %}

<form method="get" class="filter-form">
    {{ form.as_p }}
    <button type="submit">Apply Filters</button>
</form>

<div class="tour-list">
    {% for tour in tours %}
        <div class="tour-item">
            <h3>{{ tour.name }}</h3>
            <p><strong>Agency:</strong> {{ tour.agency.name }}</p>
            <p><strong>Description:</strong> {{ tour.description }}</p>
            <p><strong>Dates:</strong> {{ tour.start_date }} - {{ tour.end_date }}</p>
            <p><strong>Payment Conditions:</strong> {{ tour.payment_conditions }}</p>
            <a href="{% url 'tour_detail' tour.id %}" class="book-btn">More...</a>
            <a href="{% url 'book_tour' tour.id %}" class="book-btn">Book Now</a>
        </div>
    {% empty %}
        <p>No tours available.</p>
    {% endfor %}
</div>

<div class="pagination">
    {% if tours.has_previous %}
        <a href="?page=1">&laquo; First</a>
        <a href="?page={{ tours.previous_page_number }}">Previous</a>
    {% endif %}

    <span>Page {{ tours.number }} of {{ tours.paginator.num_pages }}</span>

    {% if tours.has_next %}
        <a href="?page={{ tours.next_page_number }}">Next</a>
        <a href="?page={{ tours.paginator.num_pages }}">Last &raquo;</a>
    {% endif %}
</div>

{% endblock %}
